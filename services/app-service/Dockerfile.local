FROM node:18

WORKDIR /app

COPY package.json ./
COPY prisma ./prisma/

RUN yarn

RUN npx prisma generate --schema prisma/schema.prisma

COPY . .

COPY ./src ./
COPY ./prisma ./prisma

EXPOSE 8080

CMD ["yarn", "dev"]
